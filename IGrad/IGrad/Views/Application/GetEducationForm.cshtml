@model IGrad.Models.User.UserModel
@{
    /**/

    ViewBag.Title = "Education | iGrad";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@Styles.Render("/Content/educationform.css")
<script type="text/javascript" src="~/Scripts/jquery-1.10.2.js"></script>
<script src="~/Scripts/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script>
<script type="text/javascript">
    function loadHighSchoolInfoForm() {
        console.log("loading highschool");
        hideTarget('add-new-highschool-button');
        showTarget('school-information');
        $("#school-information").load('@Url.Action("AddHighSchoolInfoPartial", "Application")');
    }

    function loadViolationInfo() {
        console.log("loading violation");
        showTarget('add-violation-information');
        $("#add-violation-information").load('@Url.Action("GetAddViolation", "Application")');
    }

    function hideTarget(targetId) {
        console.log("hiding sth");
        $('#' + targetId).addClass('hidden');
    }

    function showTarget(targetId) {
        console.log("showing sth");
        $('#' + targetId).removeClass('hidden');
    }

    function deleteHighSchoolRecord(fieldId) {
        $.ajax({
            type: "POST",
            url: '/Application/DeleteHighSchool',
            data: { "fieldId": fieldId },
            success: hideTarget('highSchool_' + fieldId)
        });
    }

    function deleteViolation(fieldId) {
        $.ajax({
            type: "POST",
            url: '/Application/DeleteViolation',
            success: hideTarget('violation_' + fieldId)
        });
    }
</script>

    <h3>Previous Education</h3>
    <small class="form-text required-marker-indicator">* required fields.</small>
    <hr>

<!-- ADD PREVIOUS HIGH SCHOOL-->
    <div class="" id="highschool-info">
        <h4 class="bg-info">High School Information</h4>
        @{if (Model.SchoolInfo.HighSchoolInformation != null)
        {
            Html.RenderPartial("_GetHighSchoolInfo", Model.SchoolInfo.HighSchoolInformation);
        }}
    </div>
    <div class="" id="school-information">
        <!--Form to add High School Information will be rendered here-->
    </div>
    <button class="btn btn-primary" id="add-new-highschool-button" onclick="loadHighSchoolInfoForm()">Add High School</button>
    
    <br /><br />

<!-- FORM -->
@using (Html.BeginForm("GetEducationForm", "Application", FormMethod.Post, new { enctype = "multipart/form-data", @id = "education-form" }))
{
    <!-- GENERAL INFORMATION -->
    <div class="wrapper">
        <h4 class="bg-info">General Information</h4>
        <div class="row">
            <div class="form-group col-md-6">
                <div class="form-group col-md-6">
                    @Html.LabelFor(model => model.SchoolInfo.IsExpelledOrSuspended, htmlAttributes: new { @class = "control-label" })
                    <br />
                    @Html.RadioButtonFor(model => model.SchoolInfo.IsExpelledOrSuspended, true) Yes
                    @Html.RadioButtonFor(model => model.SchoolInfo.IsExpelledOrSuspended, false) No
                </div>
                <div class="form-group col-md-6">
                    @Html.LabelFor(model => model.SchoolInfo.LastYearAttended, htmlAttributes: new { @class = "control-label" })
                    @Html.TextBoxFor(model => model.SchoolInfo.LastYearAttended, "{0:#.#}", htmlAttributes: new { @class = "form-control", @placeholder = "Year attended" })
                </div>
            </div>
            <div class="form-group col-md-6">
                @Html.LabelFor(model => model.SchoolInfo.CurrentGrade, htmlAttributes: new { @class = "control-label" })
                @Html.TextBoxFor(model => model.SchoolInfo.CurrentGrade,"{0:#.#}" ,htmlAttributes: new { @class = "form-control", @placeholder = "Current grade" })
            </div>
        </div>

        <div class="row">
            <div class="form-group col-md-6">
                @Html.LabelFor(model => model.SchoolInfo.SchoolOpinion, htmlAttributes: new { @class = "control-label" })
                @Html.TextAreaFor(model => model.SchoolInfo.SchoolOpinion, htmlAttributes: new { @class = "form-control", @rows = 3, @placeholder = "Student opinions..." })
            </div>
            <div class="form-group col-md-6">
                @Html.LabelFor(model => model.SchoolInfo.HowDoingInSchool, htmlAttributes: new { @class = "control-label" })
                @Html.TextAreaFor(model => model.SchoolInfo.HowDoingInSchool, htmlAttributes: new { @class = "form-control", @rows = 3, @placeholder = "Student performance..." })
            </div>
        </div>

        <div class="row">
            <div class="form-group col-md-6">
                @Html.LabelFor(model => model.SchoolInfo.StrengthAndWeakness, htmlAttributes: new { @class = "control-label" })
                @Html.TextAreaFor(model => model.SchoolInfo.StrengthAndWeakness, htmlAttributes: new { @class = "form-control", @rows = 4, @placeholder = "Strengths and improvements..." })
            </div>
            <div class="form-group col-md-6">
                @Html.LabelFor(model => model.SchoolInfo.ParentAdditionalFeedbackInfo, htmlAttributes: new { @class = "control-label" })
                @Html.TextAreaFor(model => model.SchoolInfo.ParentAdditionalFeedbackInfo, htmlAttributes: new { @class = "form-control", @rows = 4, @placeholder = "Comments..." })
            </div>
        </div>
    </div>

    
    <div class="wrapper row">
        <!-- PRIOR EDUCATION -->
        <div class="col-md-6">
            <h4 class="bg-info">Prior Education</h4>
            <div class="form-group">
                @Html.LabelFor(model => model.SchoolInfo.PriorEducation.hasEducationOutsideUS, htmlAttributes: new { @class = "control-label" })
                <br />
                @Html.RadioButtonFor(model => model.SchoolInfo.PriorEducation.hasEducationOutsideUS, true) Yes
                @Html.RadioButtonFor(model => model.SchoolInfo.PriorEducation.hasEducationOutsideUS, false) No
            </div>
            <div class="form-group">
                @Html.LabelFor(model => model.SchoolInfo.PriorEducation.AttendedSchoolinUS, htmlAttributes: new { @class = "control-label" })
                <br />
                @Html.RadioButtonFor(model => model.SchoolInfo.PriorEducation.AttendedSchoolinUS, true) Yes
                @Html.RadioButtonFor(model => model.SchoolInfo.PriorEducation.AttendedSchoolinUS, false) No
            </div>
            <div class="form-group">
                @Html.LabelFor(model => model.SchoolInfo.PriorEducation.MonthsOfEducationOutsideUS, htmlAttributes: new { @class = "control-label" })
                @Html.TextBoxFor(model => model.SchoolInfo.PriorEducation.MonthsOfEducationOutsideUS, htmlAttributes: new { @class = "form-control", @placeholder = "Month(s)" })
            </div>
            <div class="form-group">
                @Html.LabelFor(model => model.SchoolInfo.PriorEducation.LanguageOfEducationOutsideUS, htmlAttributes: new { @class = "control-label" })
                @Html.TextBoxFor(model => model.SchoolInfo.PriorEducation.LanguageOfEducationOutsideUS, htmlAttributes: new { @class = "form-control", @placeholder = "Language spoken" })
            </div>
            <div class="form-group">
                @Html.LabelFor(model => model.SchoolInfo.PriorEducation.firstAttendanceOfUSEducation, htmlAttributes: new { @class = "control-label" })
                @Html.TextBoxFor(model => model.SchoolInfo.PriorEducation.firstAttendanceOfUSEducation, htmlAttributes: new { @class = "form-control", @placeholder = "01/01/2000" })
            </div>


        </div>

        <!-- SPECIAL PROGRAMS -->
        <div class="col-md-6">
            <h4 class="bg-info">Did the student participate in any of the following programs?</h4>
            <small>(Check all that apply)</small>

            <br />
            @Html.CheckBoxFor(model => model.QualifiedOrEnrolledInProgam.SpecialEducation, htmlAttributes: new { @class = "" })
            @Html.LabelFor(model => model.QualifiedOrEnrolledInProgam.SpecialEducation, htmlAttributes: new { @class = "" })
            <br />
            @Html.CheckBoxFor(model => model.QualifiedOrEnrolledInProgam.plan504, htmlAttributes: new { @class = "" })
            @Html.LabelFor(model => model.QualifiedOrEnrolledInProgam.plan504, htmlAttributes: new { @class = "" })
            <br />
            @Html.CheckBoxFor(model => model.QualifiedOrEnrolledInProgam.Title, htmlAttributes: new { @class = "" })
            @Html.LabelFor(model => model.QualifiedOrEnrolledInProgam.Title, htmlAttributes: new { @class = "" })
            <br />
            @Html.CheckBoxFor(model => model.QualifiedOrEnrolledInProgam.LAP, htmlAttributes: new { @class = "" })
            @Html.LabelFor(model => model.QualifiedOrEnrolledInProgam.LAP, htmlAttributes: new { @class = "" })
            <br />
            @Html.CheckBoxFor(model => model.QualifiedOrEnrolledInProgam.HighlyCapable, htmlAttributes: new { @class = "" })
            @Html.LabelFor(model => model.QualifiedOrEnrolledInProgam.HighlyCapable, htmlAttributes: new { @class = "" })
            <br />
            @Html.CheckBoxFor(model => model.QualifiedOrEnrolledInProgam.EngishAsSecondLanguage, htmlAttributes: new { @class = "" })
            @Html.LabelFor(model => model.QualifiedOrEnrolledInProgam.EngishAsSecondLanguage, htmlAttributes: new { @class = "" })
        </div>
    </div>
}
<!-- END FORM -->

    <!-- VIOLATIONS CHECK -->
    <div class="wrapper">
        <div id="violation-container">
            <h4 class="bg-info">Previous Violation</h4>
            @{if (Model.SchoolInfo.PreviousSchoolViolation == null)
                {
                <div class="">
                    <h4>Has the student had a school violation?</h4>
                    <button class="btn btn-primary" onclick="loadViolationInfo()">Yes, add violation</button>
                    <button class="btn " value="" onclick="hideTarget('violation-container')">No</button>
                </div>
                }
              else
                {
                <div class="" id="existing-violation-information">
                    @{Html.RenderPartial("_GetViolationInfo", Model.SchoolInfo.PreviousSchoolViolation);}
                </div>
                }
            }
            <div class="" id="add-violation-information">
            </div>
        </div>
    </div>
    


    <div class="form-row">
        <div class="pull-right">
            <button class="btn btn-primary btn-lg btn-success" type="submit" form="education-form">
                Continue
                <i class="fas fa-caret-right"></i>
            </button>
        </div>
    </div>